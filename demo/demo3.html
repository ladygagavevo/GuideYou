<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js – The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/moon.css" id="theme">
		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	  	<link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
		<!-- Printing and PDF exports -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>



<style>

*{
	font-family: "微軟正黑體";
}
@media (min-width: 320px) and (max-width: 480px) {


#momo{
	display: block;
	top:-300px;
}

 }

#size{
	font-size: 2em;
	color: #f4e842;
}

h{
	font-size: 1.1em;
	letter-spacing: 3px;
	background-image: url(http://jmd.im/wp-content/uploads/2017/06/blackx_thumbnail.jpg);
}

y{
	font-size: 30px;
	color:white;
	line-height:0.5px;
	padding: 0px;
}
#start{
	border-radius: 100%;
	border: solid 2px white;
	width: 500px;
	height: 500px;
	margin:0px auto;
	position: absolute;
}
#start h2{
	 transform:translateY(150%);
}

</style>
	<body>
		<div class="back">
			<a href="guidespot.html">
				<i class="material-icons" style="color:white;cursor:pointer;">reply</i>
			</a>
		</div>
		<div class="reveal" style="height: 90%;position:absolute;">
			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides" id="slides">
				<section data-markdown>
					<div id="start">
						<h2>GUIDE START</h2>
					</div>
				</section>
			</div>
		</div>



		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<!--引用FIREBASE-->
		<script src="https://www.gstatic.com/firebasejs/4.7.0/firebase.js"></script>
		<script>
			// Initialize Firebase
		var config = {
			apiKey: "AIzaSyAke2WlnbKKYkn2z8igaG1R6Q-VJQmqxHM",
		    authDomain: "guideyout-d9ecf.firebaseapp.com",
		    databaseURL: "https://guideyout-d9ecf.firebaseio.com",
				storageBucket: "guideyout-d9ecf.appspot.com"
			};
		firebase.initializeApp(config);

		// Create a root reference
		var storageRef = firebase.storage().ref();
		// Create a reference to 'mountains.jpg'
		var mountainsRef = storageRef.child('4adbf33b038233f79e5570adb859fc7c.png');
		// Create a reference to 'images/mountains.jpg'
		var mountainImagesRef = storageRef.child('images/4adbf33b038233f79e5570adb859fc7c.png');
		// While the file names are the same, the references point to different files
		mountainsRef.name === mountainImagesRef.name            // true
		mountainsRef.fullPath === mountainImagesRef.fullPath    // false

		//寫入資料
		var ref = firebase.database().ref("intro/中興大學");
		ref.set({
			slide1: {
				name: '中興湖',
				photo: 'http://album.udn.com/community/img/PSN_PHOTO/mayfun/f_4130950_1.JPG',
				detail:'中興湖是中興學子以工讀或義務的方式努力挖出的一座湖，以中國大陸「秋海棠」的形狀打造，旁邊陪襯著台灣和海南島形狀的小水池，中央的小島則利用鵝卵石被堆砌稱作蘭州島，島上有白鷺與夜鷺棲息。湖畔遍植花木，景色優美，生態豐富有趣。三十多年來，中興湖已成為中興人夢想和創意的泉源。'
			slide2: {
				name: '中興湖的鵝',
				photo: 'http://i809.photobucket.com/albums/zz19/sppa10598611/d0624/d3.jpg',
				detail:'常在中興湖畔遊走的大白鵝其中最引人注目的莫過於「瓜瓜」。中興湖的鵝是路霸，常常出沒在中興大學的大馬路上，如果有人拿食物餵他們，鵝霸們會傻傻地跟著拿食物的人。',
			} ,
			slide3: {
				name: '中興湖上的鳥',
				photo: 'http://farm1.static.flickr.com/227/497491690_a79917560d.jpg',
				detail:'夜鷺是夜行性水鳥，除了繁殖期外，大部分都休憩於密林中。本校的夜鷺約從民國91年（2002）開始來到中興湖，繁殖到現在已有100隻左右，數量相當驚人。'
			} ,
			slide4: {
				name: '中興湖的規定 ',
				photo: 'http://3.bp.blogspot.com/-KECjhp82nGw/VVsfXifj6rI/AAAAAAAAg-s/SDdWHDsVZNA/s1600/DSC01150.JPG',
				detail:'中興大學的學生常常在同學生日時，把壽星丟到中興湖裡，當做至高無上的祝福。但曾經被丟到中興湖的學生們表示，裡面真的很髒，不想再被丟下去了。'
			}
		});

		 var i=0;
		//拿出資料
		ref.once('value', function(snapchat) {
			console.log('000');
			snapchat.forEach(function(item){
				i++;
				console.log(item.val());
				document.getElementById('slides').innerHTML+=
				'<section id="momo"><h4>'+item.val().name+
				'</h4><img width="auto" height="300px" src="'+item.val().photo+'" id="downloadedImg'+i+'"></img><br><y>'+item.val().detail+'</y></section>';
				//recArray.push(item.val().name);
			});
			console.log('show h3');
			//setTimeout(function(){wait2addImg();}, 500);
		});
		 //data-markdown
		console.log('i is='+i);
		console.log('second');
		// More info https://github.com/hakimel/reveal.js#configuration
		//此段要打出來才可以控制並顯示
		Reveal.initialize({
			controls: true,
			progress: true,
			history: true,
			center: true,
			transition: 'slide', // none/fade/slide/convex/concave/zoom
			// More info https://github.com/hakimel/reveal.js#dependencies
			dependencies: [
				{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
				{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
				{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
				{ src: 'plugin/search/search.js', async: true },
				{ src: 'plugin/zoom-js/zoom.js', async: true },
				{ src: 'plugin/notes/notes.js', async: true }
			]
		});

		// Basic Write Operations
	    firebase.database().ref('slidetest').set({
	    currentslideX : 0,
	    // currentslideY : 0,
	    // autoSlide : 0
	    });
		// 'slidechanged' event listener to update the firebase JSON whenever there is a change in slide.
		// This can be further improved to have firebase authentication to restrict slide update only by the presenter.

		//換頁的時候
		Reveal.addEventListener( 'slidechanged', function( event ) {
			firebase.database().ref('slidetest').once('value').then(function(snapshot) {
				// if (snapshot.val().autoSlide==0) {
					firebase.database().ref('slidetest').set({
						// autoSlide : snapshot.val().autoSlide,
						currentslideX : Reveal.getState().indexh,
						// currentslideY : Reveal.getState().indexv
					});
					// console.log('snapshot.val().autoSlide is: ' + snapshot.val().autoSlide);
				// }
			});
		});
		// Whenever there is a change in slide position, the same will be updated in the client using Reveal.slide() function .
		firebase.database().ref('slidetest').on("value", function(snapshot) {
		  Reveal.slide(snapshot.val().currentslideX);
		});


		</script>
		<script src="jquery-1.11.0.min.js"></script>
	</body>
</html>
